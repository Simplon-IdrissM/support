---
layout: post
title:  "Semaine 16 : Intro PHP/MySQL"
date:   2016-10-17 09:00:00 +0200
categories: hebdo 
---

## J1 : PHP suite

:warning: le cours de mardi après-midi est repoussé à vendredi matin.


### Rendus : descriptif détaillé de votre projet perso + maquettes



### Ajouter son utilisateur au groupe www-data

```bash
sudo usermod -aG www-data votreIdentifiant 
sudo chmod -R 775 /var/www/
```


### :computer: Formulaire simple

Créez une page contenant un formulaire permettant de saisir un nom.

Après validation affichez une page contenant : "Votre nom est : nomSaisi"


### Méthode POST

Permet de transmettre les données d'un formulaire sans les afficher dans l'URL.

### :computer: Login

Créez un Formulaire de login basé sur feuille de style Bootstrap

- Afficher "Erreur d'identification" en cas d'erreur
- Afficher "bienvenue Toto" en cas d'identification réussi'

## J2

:bulb: corrections

- [v1 » une seule page gère le formulaire de login, les erreurs d'identification et le message](https://gist.github.com/rxlabz/9676e5dbb8db2decbe6db17f408fd927)
- v2 » une page pour le form, une pour la vérification, une pour le message de bienvenue
- v3 » une seule page gère l'inclusion  :
  - d'un fichier contenant le formulaire et l'affichage éventuel d'un message d'erreur,
  - d'un fichier contenant une pseudo page d'accueil

### Constantes

PHP permet de définir des **constantes globales** cf. correction v1
 
 ```php
 define('MAIL_ADMIN', 'toto@gmail.com');
 
 if( $error == true ){
    sendNotif(MAIL_ADMIN, $msg );
 }
 
 ```

### Sessions

#### Les Sessions

Les sessions permettent de stocker sur le serveur, des variables associées à un utilisateur.
Ces données sont temporaires, et les sessions et leur données sont détruites à la fermeture du navigateur.


```php
<?php
	session_start();
	if( ! $_SESSION['compteur'] )
		$_SESSION['compteur'] = 0;
	else
		$_SESSION['compteur'] += 1;
	echo "Nombre de vues : ".$_SESSION['compteur'];
?>
<a href="destroy_sessions.php">Effacer</a>
```

[Exemple 1](https://github.com/Simplon-lyon/dev-web/blob/master/php/sessions/sessions.php)

[Exemple 2](https://github.com/Simplon-lyon/dev-web/blob/master/php/sessions/sessions_v2.php)

Typiquement, les sessions sont utilisées pour garder des informations d'identification.
 Une fois l'identification effectuée, le serveur associe des informations, des variables de sessions,
 à l'utilisateur. Ces variables de sessions $_SESSION seront accessibles par tous les scripts PHP,
 et permettront par exemple de savoir si l'utilisateur qui ouvre une page est bien autorisée à le faire.


```php
<?php
	if( !$_SESSION['identifiant']   ){
		// l'utilisateur n'est pas identifié » affichage du formulaire de login
		include('login.php');
	} else if (!$_SESSION['role'] < 3){
		echo "Vous n'avez pas les droits permettant d'accèder à cette page";
	}
// ...
```

+ Destruction de session

```php
session_unset(); // efface les var de session
session_destroy(); // détruit la session
```

[Les sessions ( et les cookies ) sur OC](https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/variables-superglobales-sessions-et-cookies)
[Les sessions sur PHP facile](http://www.lephpfacile.com/cours/18-les-sessions)



## J3

#### :computer: mini défi Crypto

Sachant que Dede vaut Nono, et inversement.

Que vaut **Sx Myno Go Dbecd** ?

Écrivez le programme de chiffrement et déchiffrement.

### Webdesign
  - **explorez** » :fire: [siteinspire.com](https://www.siteinspire.com)
  - puis d'ici la fin de semaine, commencez à préparer les/des maquettes graphiques **"fidèles"**,
  - **déclinez** : couleurs, mises en page, navigation, ...

### Applicatif
  - lister les principales difficultés » essayer de schématiser les différentes parties complexes,
 ainsi que leur articulations avec les autres parties 
  - essayez de **prototyper** : petites "études" **isolées** sur un(e) problème/composant/fonctionnalité nécessaire

### UI/UX : User Interface / User Xperience
Repérez des applications/sites qui vous semblent bien pensées et agréables à utiliser
» Objectifs / le Graal (des Graaux?) :
- Lisibilité : texte lisible , élements interactifs rapidement identifiables, animation pour "guider"...
- Intuitivité : "Tout comme une bonne blague, une bonne UI ne doit pas avoir besoin d'être expliquée" ( en vrai ça dépend... )
  - Onboarding : pensez la première utilisation
  - ne pas proposer trop de choix en même tps
  - ...
- Productivité : avoir le soucis de faire gagner du temps à l'utilisateur, que ce soit pour un usage bref ou un usage régulier 
» comment opimiser les différentes étapes » ex : évolution des formulaires d'inscriptions, avec validation en cours de frappes 

## J4 : MySQL



## J5 : PHP & MYSQL





## Annexes

Polymer » web components
- custom elements v1 » créer un associer un tag "personnalisé" avec une **classe**
```javascript
class MyEl extends HTMLElement{
    constructor(){
        super();
        // events this.addEventListenner...
        // initial state
        // attachShadow ???
    }
    // à chaque insertion ds la DOM
    connectedCallback(){
        
    }
    
    disconnectedCallback(){
    
    }
    // (  )
    adoptedCallback(){
    
    }
    
    static get observedAttributes(){
        return ['selected'];
    };
    
    // a chaq chgmt d'attribut
    attributeChangedCallback(attrName, oldValue, newValue){
    this[attrName] = newValue;
    }
    
    set selected(value){
        if( this._selected === value ) return;
        this._selected = value;
        this.setAttribute('selected', value);//optionnal
    }
    
    get selected(){
        return this._selected;
    }
}
customElement.define("my-el", MyEl);
```


